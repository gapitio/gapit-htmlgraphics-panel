"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[285],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=c(n),u=r,f=m["".concat(l,".").concat(u)]||m[u]||p[u]||i;return n?a.createElement(f,o(o({ref:t},d),{},{components:n})):a.createElement(f,o({ref:t},d))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4706:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return d},default:function(){return m}});var a=n(3117),r=n(102),i=(n(7294),n(3905)),o=["components"],s={id:"dynamic-variables",title:"Dynamic variables"},l=void 0,c={unversionedId:"advanced/dynamic-variables",id:"advanced/dynamic-variables",isDocsHomePage:!1,title:"Dynamic variables",description:"Check out this article about mutations Arrays, Objects and Mutations",source:"@site/docs/advanced/dynamic-variables.md",sourceDirName:"advanced",slug:"/advanced/dynamic-variables",permalink:"/docs/advanced/dynamic-variables",editUrl:"https://github.com/gapitio/gapit-htmlgraphics-panel/edit/main/website/docs/advanced/dynamic-variables.md",tags:[],version:"current",frontMatter:{id:"dynamic-variables",title:"Dynamic variables"},sidebar:"docsSidebar",previous:{title:"Update grafana variable example",permalink:"/docs/examples/update-grafana-variable-example"},next:{title:"Performance",permalink:"/docs/performance"}},d=[{value:"Example 1",id:"example-1",children:[],level:2}],p={toc:d};function m(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Check out this article about mutations ",(0,i.kt)("a",{parentName:"p",href:"https://medium.com/@fknussel/arrays-objects-and-mutations-6b23348b54aa"},"Arrays, Objects and Mutations")))),(0,i.kt)("p",null,"Dynamic variables basically means the variable mutates. Mutations basically means the variable changes (",(0,i.kt)("a",{parentName:"p",href:"https://medium.com/@fknussel/arrays-objects-and-mutations-6b23348b54aa"},"A good article about mutations"),")."),(0,i.kt)("p",null,"Because it mutates there are some stuff to be careful about. The main thing is where you copy the variable from."),(0,i.kt)("h2",{id:"example-1"},"Example 1"),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Panel json"),(0,i.kt)("div",null,(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "calcsMutation": "standard",\n  "reduceOptions": {\n    "calcs": [\n      "lastNotNull",\n      "last",\n      "first",\n      "firstNotNull",\n      "min",\n      "max",\n      "mean",\n      "sum",\n      "count",\n      "range",\n      "delta",\n      "step",\n      "diff",\n      "logmin",\n      "allIsZero",\n      "allIsNull",\n      "diffperc"\n    ]\n  },\n  "add100Percentage": true,\n  "centerAlignContent": true,\n  "overflow": "visible",\n  "SVGBaseFix": true,\n  "codeData": "{\\n  \\"text\\": \\"Random text\\"\\n}",\n  "rootCSS": "",\n  "css": "* {\\n  font-family: Open Sans;\\n}\\n\\n.box {\\n  border: solid #555 2px;\\n  border-radius: 10px;\\n  padding: 10px 20px;\\n}\\n",\n  "html": "",\n  "renderOnMount": true,\n  "onRender": "",\n  "dynamicHtmlGraphics": true,\n  "dynamicData": false,\n  "dynamicFieldDisplayValues": false,\n  "dynamicProps": false,\n  "panelupdateOnMount": true,\n  "onInitOnResize": false,\n  "onInit": "console.log(\\"ONINIT RELOAD\\");\\n\\nconst data1 = htmlGraphics.data;\\n\\nfunction update() {\\n  console.log(\\"htmlGraphics\\", htmlGraphics.data.series[0].fields[1].state.calcs.last);\\n  console.log(\\"data1\\", data1.series[0].fields[1].state.calcs.last);\\n}\\n\\nhtmlNode.addEventListener(\\"panelupdate\\", update);\\n"\n}\n')))),(0,i.kt)("p",null,"Let's say the first time you refresh the value is 10 and the second time the value is 20."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"onInit")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"console.log('ONINIT RELOAD');\n\nconst data1 = htmlGraphics.data;\n\nfunction update() {\n  console.log('htmlGraphics', htmlGraphics.data.series[0].fields[1].state.calcs.last);\n  console.log('data1', data1.series[0].fields[1].state.calcs.last);\n}\n\nhtmlNode.addEventListener('panelupdate', update);\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Console")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"htmlGraphics 10\ndata1 10\n\nhtmlGraphics 20\ndata1 10\n")),(0,i.kt)("p",null,"Notice the first time it logs both htmlGraphics and data1 are 10, but the second time htmlGraphics is 20 and data1 is 10. The reason for this is because ",(0,i.kt)("inlineCode",{parentName:"p"},"htmlGraphics.data")," is assigned to ",(0,i.kt)("inlineCode",{parentName:"p"},"data1")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"htmlGraphics")," is the one with the dynamic variable."),(0,i.kt)("p",null,"For ",(0,i.kt)("inlineCode",{parentName:"p"},"data1")," to be dynamic ",(0,i.kt)("a",{parentName:"p",href:"/docs/options#dynamic-data"},"Dynamic data object")," must be true."))}m.isMDXComponent=!0}}]);